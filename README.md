## Проектная документация

### Описание проекта
Проект представляет собой систему, построенную на базе модели LLama с интеграцией в Telegram-бота и другими полезными функциями, включая работу с Yougile, Яндекс.Диском и моделью Gigachat. Система создана для автоматизации ряда процессов, включая управление файлами, парсинг чатов и создание задач из диалогов.

### Архитектура проекта
Проект состоит из нескольких контейнеров, которые взаимодействуют друг с другом для обеспечения комплексного функционала. Каждый контейнер имеет свою задачу и роль в проекте.

### Список контейнеров
Каждый контейнер описан ниже с указанием его предназначения и краткого описания ключевых файлов.

---

#### 1. **activation-user-bot-main**
   - **Описание**: Контейнер для создания эндпоинта, который интегрируется с университетским репозиторием `agnia-challenge-api-main` для авторизации в боте и формирования системного промпта.
   - **Основные файлы**:
     - **Dockerfile**: Описание окружения для работы контейнера.
     - **main.py**: Главный скрипт для запуска эндпоинта и логики работы бота.
     - **requirements.txt**: Список зависимостей.
     - **userbot_session.session**: Сессия для взаимодействия с Telegram API.
   - **Примечание**: Этот контейнер отвечает за обработку запросов авторизации и отправляет их для проверки на стороне университета.

---

#### 2. **agnia-challenge-api-main**
   - **Описание**: Репозиторий для обработки авторизации и создания системного промпта, необходимого для работы бота.
   - **Основные файлы**:
     - **Dockerfile**: Конфигурация Docker-контейнера.
     - **README.md**: Инструкции по работе с API.
     - **authorizations**: Логика авторизации.
     - **team_actions**: Сценарии и функции для управления действиями команд.
   - **Примечание**: Этот контейнер используется для обеспечения аутентификации пользователей и формирует системный промпт на основе параметров запроса.

---

#### 3. **fastapi-backend-main**
   - **Описание**: Основной бэкенд для веб-приложения, включая интеграцию с Yougile.
   - **Основные файлы**:
     - **app**: Весь основной код приложения, включая обработку запросов.
     - **Dockerfile**: Описание Docker-контейнера.
     - **settings.py**: Конфигурационные параметры FastAPI.
   - **Примечание**: Этот контейнер выполняет задачи, связанные с веб-приложением и управлением данными в Yougile.

---

#### 4. **llm-api-main**
   - **Описание**: API для взаимодействия с моделью Gigachat, используемой в качестве ручного ассистента.
   - **Основные файлы**:
     - **main.py**: Главный файл API.
     - **app**: Логика взаимодействия с моделью Gigachat.
     - **requirements.txt**: Зависимости.
   - **Примечание**: Этот контейнер позволяет получать ответы от модели Gigachat, чтобы использовать их в чат-боте.

---

#### 5. **messages-grip-bot-main**
   - **Описание**: Модуль для парсинга чатов и работы с бизнес-аккаунтом.
   - **Основные файлы**:
     - **app.py**: Основной файл для логики приложения.
     - **database**, **handlers**, **models**: Компоненты для работы с данными и обработкой сообщений.
     - **config.py**: Конфигурации.
   - **Примечание**: Этот контейнер позволяет анализировать чаты, создавать summary сообщений и конвертировать их в задачи, которые передаются в Yougile.

---

#### 6. **react-client-main**
   - **Описание**: Веб-клиент для работы с приложением.
   - **Основные файлы**:
     - **src** и **public**: Исходный код React.
     - **Dockerfile**: Описание Docker-контейнера для развертывания клиента.
     - **nginx.conf**: Конфигурация Nginx для развертывания.
   - **Примечание**: Этот контейнер предоставляет пользователям удобный интерфейс для работы с приложением и интеграцией Yougile.

---

#### 7. **yandex-drive-api-main**
   - **Описание**: API для интеграции с Яндекс.Диском через FastAPI, с функциями создания, перемещения и удаления файлов и папок, а также получения публичных ссылок.
   - **Основные файлы**:
     - **app**: Логика работы с Яндекс.Диском.
     - **Dockerfile**: Описание Docker-контейнера.
     - **requirements.txt**: Список зависимостей.
   - **Примечание**: Этот контейнер обрабатывает все действия, связанные с Яндекс.Диском.

---

#### 8. **syntax-terminatorsaes-aes-agile-main**
   - **Описание**: Главный репозиторий для развертывания всех контейнеров, содержит Docker Compose файл для продакшн-среды.
   - **Основные файлы**:
     - **docker-compose.prod.yaml**: Основной файл для запуска всех контейнеров в продакшн.
     - **Makefile**: Команды для сборки и запуска.
     - **.gitlab-ci.yml**: Конфигурация CI/CD.
   - **Примечание**: Этот контейнер используется для настройки, развертывания и управления всеми компонентами проекта.

---

### Установка и запуск
1. **Настройка переменных окружения**: Используйте файл **.env_example** для создания `.env` файла с необходимыми переменными.
2. **Сборка и запуск**: Используйте `docker-compose.prod.yaml` для сборки всех контейнеров.
   ```bash
   docker-compose -f docker-compose.prod.yaml up --build
   ```
3. **Запуск отдельных компонентов**: Если нужно протестировать отдельный контейнер, перейдите в его директорию и выполните:
   ```bash
   docker build -t <имя_контейнера> .
   docker run <имя_контейнера>
   ```
4. **Создание Makefile**
   ```bash
   dev:
	docker compose -f docker-compose.dev.yaml up -d

   prod:
	docker compose -f docker-compose.prod.yaml up -d --build

   down:
	docker compose -f docker-compose.prod.yaml down

   logs:
	docker compose -f docker-compose.prod.yaml logs -f --tail=20

   ```
5. **Запуск одной командой**
   ```bash
   make prod
   ```

